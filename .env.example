# ============================================================
# Variáveis de Ambiente - Sistema de Gerenciamento Hospitalar
# ============================================================
#
# Este arquivo contém TODAS as variáveis de ambiente usadas
# no sistema. Copie este arquivo para .env e ajuste conforme
# necessário.
#
# IMPORTANTE: Nunca commite o arquivo .env com credenciais
# reais no Git!
#
# ============================================================

# ============================================
# BANCOS DE DADOS MYSQL
# ============================================

# MySQL - Agendamento Service
MYSQL_AGENDAMENTO_HOST=mysql-agendamento
MYSQL_AGENDAMENTO_PORT=3306
MYSQL_AGENDAMENTO_DATABASE=agendamento_db
MYSQL_AGENDAMENTO_USER=root
MYSQL_AGENDAMENTO_PASSWORD=root
MYSQL_AGENDAMENTO_PORT_EXTERNO=3307

# MySQL - Clínica Service
MYSQL_CLINICA_HOST=mysql-clinica
MYSQL_CLINICA_PORT=3306
MYSQL_CLINICA_DATABASE=clinica_db
MYSQL_CLINICA_USER=root
MYSQL_CLINICA_PASSWORD=root
MYSQL_CLINICA_PORT_EXTERNO=3308

# MySQL - Centro Cirúrgico Service
MYSQL_CENTRO_CIRURGICO_HOST=mysql-centro-cirurgico
MYSQL_CENTRO_CIRURGICO_PORT=3306
MYSQL_CENTRO_CIRURGICO_DATABASE=centro_cirurgico_db
MYSQL_CENTRO_CIRURGICO_USER=root
MYSQL_CENTRO_CIRURGICO_PASSWORD=root
MYSQL_CENTRO_CIRURGICO_PORT_EXTERNO=3309

# MySQL - Keycloak
MYSQL_KEYCLOAK_HOST=mysql-keycloak
MYSQL_KEYCLOAK_PORT=3306
MYSQL_KEYCLOAK_DATABASE=keycloak
MYSQL_KEYCLOAK_USER=root
MYSQL_KEYCLOAK_PASSWORD=root
MYSQL_KEYCLOAK_PORT_EXTERNO=3310

# ============================================
# RABBITMQ (MENSAGERIA)
# ============================================

RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672
RABBITMQ_DEFAULT_USER=guest
RABBITMQ_DEFAULT_PASS=guest
RABBITMQ_VHOST=/

# Filas e Exchanges
RABBITMQ_EXCHANGE=hospital.exchange
RABBITMQ_QUEUE_CONSULTA=consulta.queue
RABBITMQ_QUEUE_EXAME=exame.queue

# ============================================
# KEYCLOAK (AUTENTICAÇÃO)
# ============================================

KEYCLOAK_HOST=keycloak
KEYCLOAK_PORT=8090
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin
KEYCLOAK_REALM=hospital

# JWT Issuer URI (interno - entre containers)
KEYCLOAK_JWT_ISSUER_URI=http://keycloak:8090/realms/hospital

# JWT Issuer URI (externo - para testes locais)
KEYCLOAK_JWT_ISSUER_URI_EXTERNAL=http://localhost:8090/realms/hospital

# Client Secrets (use secrets seguros em produção!)
KEYCLOAK_CLIENT_SECRET_AGENDAMENTO=agendamento-secret-key-2024
KEYCLOAK_CLIENT_SECRET_CLINICA=clinica-secret-key-2024
KEYCLOAK_CLIENT_SECRET_CENTRO_CIRURGICO=centro-cirurgico-secret-key-2024
KEYCLOAK_CLIENT_SECRET_GATEWAY=gateway-secret-key-2024

# ============================================
# MICROSSERVIÇOS - PORTAS
# ============================================

GATEWAY_PORT=8080
AGENDAMENTO_PORT=8081
CLINICA_PORT=8082
CENTRO_CIRURGICO_PORT=8083

# ============================================
# MICROSSERVIÇOS - URLs (INTERNAS)
# ============================================

# URLs entre containers (dentro do Docker network)
SERVICE_AGENDAMENTO_URL=http://agendamento-service:8081
SERVICE_CLINICA_URL=http://clinica-service:8082
SERVICE_CENTRO_CIRURGICO_URL=http://centro-cirurgico-service:8083
SERVICE_GATEWAY_URL=http://gateway-service:8080

# ============================================
# MICROSSERVIÇOS - URLs (EXTERNAS)
# ============================================

# URLs para acesso externo (localhost)
SERVICE_AGENDAMENTO_URL_EXTERNAL=http://localhost:8081
SERVICE_CLINICA_URL_EXTERNAL=http://localhost:8082
SERVICE_CENTRO_CIRURGICO_URL_EXTERNAL=http://localhost:8083
SERVICE_GATEWAY_URL_EXTERNAL=http://localhost:8080

# ============================================
# CONFIGURAÇÕES DE JVM
# ============================================

# Agendamento Service
AGENDAMENTO_JAVA_OPTS=-Xms512m -Xmx1024m -XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0

# Clínica Service
CLINICA_JAVA_OPTS=-Xms512m -Xmx1024m -XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0

# Centro Cirúrgico Service
CENTRO_CIRURGICO_JAVA_OPTS=-Xms512m -Xmx1024m -XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0

# Gateway Service
GATEWAY_JAVA_OPTS=-Xms256m -Xmx512m -XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0

# ============================================
# SPRING BOOT - CONFIGURAÇÕES GERAIS
# ============================================

# Profiles ativos (dev, prod, test)
SPRING_PROFILES_ACTIVE=dev

# Logging
LOGGING_LEVEL_ROOT=INFO
LOGGING_LEVEL_COM_HOSPITAL=DEBUG

# JPA/Hibernate
SPRING_JPA_SHOW_SQL=true
SPRING_JPA_HIBERNATE_DDL_AUTO=update

# ============================================
# SEGURANÇA
# ============================================

# ATENÇÃO: Em produção, use valores diferentes e seguros!
# Nunca use valores padrão em produção!

# JWT Secret (caso precise)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# Encryption Key (caso precise)
ENCRYPTION_KEY=your-encryption-key-change-this-in-production

# ============================================
# RECURSOS E LIMITES (DOCKER)
# ============================================

# MySQL
MYSQL_MEMORY_LIMIT=512m
MYSQL_MEMORY_RESERVATION=256m

# RabbitMQ
RABBITMQ_MEMORY_LIMIT=512m
RABBITMQ_MEMORY_RESERVATION=256m

# Keycloak
KEYCLOAK_MEMORY_LIMIT=1g
KEYCLOAK_MEMORY_RESERVATION=512m

# Microsserviços
SERVICE_MEMORY_LIMIT=1g
SERVICE_MEMORY_RESERVATION=512m

# ============================================
# DESENVOLVIMENTO
# ============================================

# Debug
JAVA_DEBUG_PORT=5005
JAVA_DEBUG_ENABLED=false

# Hot Reload
SPRING_DEVTOOLS_RESTART_ENABLED=true

# ============================================
# MONITORAMENTO (OPCIONAL)
# ============================================

# Actuator
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,info,metrics,prometheus

# Prometheus
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_ENABLED=false
GRAFANA_PORT=3000

# ============================================
# BACKUP (OPCIONAL)
# ============================================

BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=7

# ============================================
# NOTAS IMPORTANTES
# ============================================
#
# 1. NUNCA commite credenciais reais no Git
# 2. Use senhas fortes em produção
# 3. Mude todos os secrets antes de fazer deploy
# 4. Use um gerenciador de secrets (Vault, AWS Secrets Manager, etc) em produção
# 5. Configure SSL/TLS em produção
# 6. Revise as permissões de acesso aos bancos de dados
# 7. Configure backups regulares
# 8. Implemente rotação de logs
# 9. Configure alertas e monitoramento
# 10. Faça testes de segurança regularmente
#
# ============================================================
